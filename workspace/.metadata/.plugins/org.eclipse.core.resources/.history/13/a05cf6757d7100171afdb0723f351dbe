package dataStructures;

import java.util.function.Function;
import java.util.Iterator;
import java.util.LinkedList;
import java.util.Queue;
import java.util.Set;

public class BreadthFirstSequence<E> implements Iterator<E> {

	
	private final Queue<E> queue = new LinkedList<>();
	private final Set<E> visitedElements;
	private final Function<E, Iterable<E>> getNeighbors;
	
	public BreadthFirstSequence(E startNode, Function<E, Iterable<E>> getNeighbors, Set<E> visitedElements) {
		this.visitedElements = visitedElements;
		this.getNeighbors = getNeighbors;
		visitedElements.add(startNode);
	}
	
	
	@Override
	public boolean hasNext() {
		return !queue.isEmpty();
	}

	@Override
	public E next() {
		E currentElement = queue.poll();
		Iterable<E> neighbors = getNeighbors.apply(currentElement);
		neighbors.forEach(neighbor -> {
			if (!visitedElements.contains(neighbor)) {
				visitedElements.add(neighbor);
				queue.add(neighbor);
			}
		});
		return currentElement;
	}	
}
