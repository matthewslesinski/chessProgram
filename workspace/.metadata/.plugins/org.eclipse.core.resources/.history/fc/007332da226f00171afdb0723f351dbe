package boardFeatures;

import java.util.function.Function;

/**
 * An enum to keep track of the different types of classes that extends {@code Line}. This way, abstraction can be
 * implemented more easily
 * @author matthewslesinski
 *
 */
public enum LineType {

	FILE(File.class),
	RANK(Rank.class),
	UP_RIGHT_DIAGONAL(UpRightDiagonal.class),
	DOWN_RIGHT_DIAGONAL(DownRightDiagonal.class);
	
	// Must be done after all LineTypes have been initialized, since otherwise it needs to be called in the constructor
	// when checking to see which enum value 'this' is won't work because 'this' won't be initialized yet
	static {
		for (LineType type : values()) {
			type.determineCharacteristics();
		}
	}
	
	private final Class<? extends Enum<? extends Line>> type;
	private final Enum<? extends Line>[] valuesArray;
	private Function<Square, ? extends Enum<? extends Line>> getLineBySquare;
	private Direction forwardDirection;
	
	private LineType(Class<? extends Enum<? extends Line>> type) {
		this.type = type;
		this.valuesArray = type.getEnumConstants();
	}
	
	
	public Class<? extends Enum<? extends Line>> getType() {
		return type;
	}
	
	public Enum<? extends Line>[] getEnumValues() {
		return valuesArray;
	}
	
	public Enum<? extends Line> getLineBySquare(Square square) {
		return getLineBySquare.apply(square);
	}
	
	public Direction getForwardDirection() {
		return forwardDirection;
	}
	
	
	
	
	private void determineCharacteristics() {
		switch (this) {
		case FILE:
			this.getLineBySquare = (square) -> square.getFile();
			this.forwardDirection = Direction.UP;
			break;
		case RANK:
			this.getLineBySquare = (square) -> square.getRank();
			this.forwardDirection = Direction.RIGHT;
			break;
		case UP_RIGHT_DIAGONAL:
			this.getLineBySquare = (square) -> square.getUpRightDiagonal();
			this.forwardDirection = Direction.UP_RIGHT;
			break;
		case DOWN_RIGHT_DIAGONAL:
			this.getLineBySquare = (square) -> square.getDownRightDiagonal();
			this.forwardDirection = Direction.DOWN_RIGHT;
			break;
		default:
			// wtf
			break;
		}
	}
}
