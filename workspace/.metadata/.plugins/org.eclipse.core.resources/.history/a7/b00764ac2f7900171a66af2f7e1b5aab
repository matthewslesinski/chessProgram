package dataStructures;

import java.util.ArrayList;
import java.util.Collection;
import java.util.Comparator;
import java.util.EnumMap;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import java.util.NavigableSet;
import java.util.SortedSet;
import java.util.Spliterator;
import java.util.function.IntFunction;

import convenienceDataStructures.UnmodifiableWrappedList;
import convenienceDataStructures.UnmodifiableWrappedSet;
import support.BadArgumentException;

public class ListBackedByMaps<E extends Enum<E>> implements Isomorphism<E, E>, FixedOrderingSet<E>, UnmodifiableWrappedList<E> {

	private final Map<E, E> forwards;
	private final Map<E, E> backwards;
	private final List<E> elements;

	@SuppressWarnings("unchecked")
	public ListBackedByMaps(Collection<E> collection) {
		if (collection.isEmpty()) {
			throw new BadArgumentException(collection, collection.getClass(), "Expected a non-empty collection");
		}
		this.elements = new ArrayList<>(collection);
		Class<E> type = (Class<E>) elements.get(0).getClass();
		this.forwards = new EnumMap<>(type);
		this.backwards = new EnumMap<>(type);
		E previous = null;
		for (E element : elements) {
			if (previous != null) {
				put(previous, element);
			}
			previous = element;
		}
	}
	
	
	public E getNext(E element) {
		return element == null ? elements.get(0) : getByElementOnLeft(element);
	}
	
	public E getPrevious(E element) {
		return element == null ? elements.get(size() - 1) : getByElementOnRight(element);
	}

	@Override
	public Map<E, E> getLeftwardMap() {
		return forwards;
	}


	@Override
	public Map<E, E> getRightwardMap() {
		return backwards;
	}



	@Override
	public Comparator<? super E> comparator() {
		// TODO Auto-generated method stub
		return null;
	}


	@Override
	public E pollLast() {
		// TODO Auto-generated method stub
		return null;
	}


	@Override
	public NavigableSet<E> descendingSet() {
		// TODO Auto-generated method stub
		return null;
	}


	@Override
	public NavigableSet<E> subSet(E fromElement, boolean fromInclusive, E toElement, boolean toInclusive) {
		// TODO Auto-generated method stub
		return null;
	}


	@Override
	public E retrieveOffsetFromElement(E element, int offset) {
		// TODO Auto-generated method stub
		return null;
	}


	@Override
	public IntFunction<E> getIndexFunction() {
		// TODO Auto-generated method stub
		return null;
	}


	@Override
	public void clear() {
		// TODO Auto-generated method stub
		UnmodifiableWrappedList.super.clear();
	}


	@Override
	public int size() {
		// TODO Auto-generated method stub
		return UnmodifiableWrappedList.super.size();
	}


	@Override
	public boolean isEmpty() {
		// TODO Auto-generated method stub
		return UnmodifiableWrappedList.super.isEmpty();
	}



	@Override
	public boolean containsAll(Collection<?> c) {
		return FixedOrderingSet.super.containsAll(c);
	}

}
