package evaluation;

import java.util.Arrays;
import java.util.EnumMap;
import java.util.Map;

import gamePlaying.Color;
import pieces.Piece;
import pieces.PieceType;
import representation.Board;

public class MaterialEvaluation implements Evaluator {

	private static final Map<Piece, Double> MATERIAL_VALUES = new EnumMap<Piece, Double>(Piece.class);
	static {
		initializeMaterialValues();
	}
	
	/**
	 * Initializes the internal map of piece's material values.
	 */
	private static void initializeMaterialValues() {
		Arrays.stream(Color.values()).forEach(color -> {
			int multiplier = color.isWhite() ? 1 : -1;
			Arrays.stream(PieceType.values()).forEach(type -> {
				Piece piece = Piece.getByColorAndType(color, type);
				MATERIAL_VALUES.put(piece, multiplier * type.getConventionalEvaluation());
			});
		});
	}
	
	@Override
	public double evaluateBoard(Board board) {
		return Arrays.stream(board.toPieceArray()).map(piece -> MATERIAL_VALUES.getOrDefault(piece, 0.)).reduce(0., Double::sum);
	}

}
