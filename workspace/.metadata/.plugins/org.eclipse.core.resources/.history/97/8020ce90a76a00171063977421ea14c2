package boardFeatures;

import java.util.function.Function;

public enum LineType {

	FILE(File.class),
	RANK(Rank.class),
	UP_RIGHT_DIAGONAL(UpRightDiagonal.class),
	DOWN_RIGHT_DIAGONAL(DownRightDiagonal.class);
	
	private final Class<? extends Enum<? extends Line>> type;
	private final Enum<? extends Line>[] valuesArray;
	private Function<Square, ? extends Enum<? extends Line>> getLineBySquare;
	
	private LineType(Class<? extends Enum<? extends Line>> type) {
		this.type = type;
		this.valuesArray = type.getEnumConstants();
		determineMethods();
	}
	
	
	public Class<? extends Enum<? extends Line>> getType() {
		return type;
	}
	
	public Enum<? extends Line>[] getEnumValues() {
		return valuesArray;
	}
	
	public Enum<? extends Line> getLineBySquare(Square square) {
		return getLineBySquare.apply(square);
	}
	
	
	
	
	private void determineMethods() {
		switch (this) {
		case FILE:
			this.getLineBySquare = (square) -> square.getFile();
			break;
		case RANK:
			this.getLineBySquare = (square) -> square.getRank();
			break;
		case UP_RIGHT_DIAGONAL:
			this.getLineBySquare = (square) -> square.getUpRightDiagonal();
			break;
		case DOWN_RIGHT_DIAGONAL:
			this.getLineBySquare = (square) -> square.getDownRightDiagonal();
			break;
		default:
			//wtf
			break;
		}
	}
}
