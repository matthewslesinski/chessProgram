package moves;


import boardFeatures.Side;
import boardFeatures.Square;
import pieces.PieceType;

public class BasicMove implements Move {

	private static final Boolean[] BOOLEAN_OPTIONS = {false, true};
	
	private final PieceType movingPiece;
	private final boolean isCapture;
	private final PieceType capturedPiece;
	private final Square start;
	private final Square end;
	private final boolean isCastle;
	private final Side castlingSide;
	private final boolean isPromotion;
	private final PieceType promotionPiece;
	private final boolean isEnPassant;
	
	
	public BasicMove(int compressedMove) {
		
		movingPiece = getObject(PieceType.values(), MoveBitStringSection.MOVING_PIECE, compressedMove);
		isCapture = getObject(BOOLEAN_OPTIONS, MoveBitStringSection.IS_CAPTURE, compressedMove);
		capturedPiece = isCapture ? getObject(PieceType.values(), MoveBitStringSection.CAPTURE_PIECE, compressedMove) : null;
		start = getObject(Square.values(), MoveBitStringSection.START_SQUARE, compressedMove);
		end = getObject(Square.values(), MoveBitStringSection.END_SQUARE, compressedMove);
		isCastle = getObject(BOOLEAN_OPTIONS, MoveBitStringSection.IS_CASTLE, compressedMove);
		castlingSide = isCastle ? getObject(Side.values(), MoveBitStringSection.CASTLING_SIDE, compressedMove) : null;
		isPromotion = getObject(BOOLEAN_OPTIONS, MoveBitStringSection.IS_PROMOTION, compressedMove);
		promotionPiece = isPromotion ? getObject(PieceType.getPromotionPieces(), MoveBitStringSection.PROMOTION_TYPE, compressedMove) : null;
		isEnPassant = getObject(BOOLEAN_OPTIONS, MoveBitStringSection.IS_EN_PASSANT, compressedMove);	
	}
	
	private <T> T getObject(T[] options, MoveBitStringSection section, int compressedMove) {
		return options[section.getValue(compressedMove)];
	}
	
	@Override
	public PieceType getMovingPiece() {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public Square getStartSquare() {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public Square getEndSquare() {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public int compress() {
		// TODO Auto-generated method stub
		return 0;
	}

}
